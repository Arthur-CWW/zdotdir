local repo plugin_name plugin_dir initfile initfiles
ZPLUGINDIR=${ZPLUGINDIR:-${ZDOTDIR:-$HOME/.config/zsh}/plugins}
for repo in $@; do
  plugin_name=${repo:t}
  plugin_dir=$ZPLUGINDIR/$plugin_name
  if [[ ! -d $plugin_dir ]]; then
    echo "Cloning $repo"
    git clone --quiet --depth 1 --recursive --shallow-submodules https://github.com/$repo $plugin_dir
    [[ $? -eq 0 ]] || { echo >&2 "plugin-clone: error cloning '$repo'." && return 1 }
  fi
done
