local giturl="$1"
local plugin_name=${${giturl##*/}%.git}
local plugindir="${ZPLUGINDIR:-$ZDOTDIR/plugins}/$plugin_name"

# clone if the plugin isn't there already
if [[ ! -d $plugindir ]]; then
  command git clone --depth 1 --recursive --shallow-submodules $giturl $plugindir
  if [[ $? -ne 0 ]]; then
    echo "plugin-clone: git clone failed for: $giturl" >&2 && return 1
  fi
fi
