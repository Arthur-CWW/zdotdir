local usage
  usage=$(<<'EOS'
string-length - print string lengths

   string length [(-q | --quiet)] [STRING...]

DESCRIPTION
string  length  reports  the  length  of  each  string argument in characters. Exit status: 0 if at least one
non-empty STRING was given, or 1 otherwise.

EXAMPLES
   >_ string length 'hello, world'
   12

   >_ set str foo
   >_ string length -q $str; echo $status
   0
   # Equivalent to test -n "$str"
EOS
)

local args=()
local flag_quiet=false
while (( $# )); do
  case $1 in
    --)
      shift
      args+=("$@")
      break
    ;;
    -h|--help)
      echo $usage
      return
    ;;
    -q|--quiet)
      flag_quiet=true
    ;;
    -*)
      echo >&2 "string length: Unknown option '$1'"
      return 2
    ;;
    *) args+=("$1") ;;
  esac
  shift
done

[[ $# -gt 0 ]] || return 1
[[ $flag_quiet = false ]] || return
local s len
local exitcode=1
for s in $@; do
  echo "here"
  len=$#s
  [[ $len -ne 0 ]] && exitcode=0
  [[ $flag_quiet = false ]] && echo $len
done
return $exitcode
